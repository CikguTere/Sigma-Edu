<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sigma Edu - Administrasi Guru Kelas 5 SD</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Default Theme (Blue) - primary application colors */
            --primary-bg: #2563eb; /* blue-600 */
            --primary-hover: #1d4ed8; /* blue-700 */
            --secondary-bg: #3b82f6; /* blue-500 */
            --text-light: #ffffff;
            --text-dark: #1f2937; /* gray-800 */
            --body-bg: #f0f4f8; /* light gray for body background */

            /* Specific Card Colors - darker, distinct */
            --card-blue-bg: #2563eb; /* blue-600 */
            --card-blue-hover: #1d4ed8; /* blue-700 */
            --card-blue-text: #ffffff;

            --card-green-bg: #16a34a; /* green-600 */
            --card-green-hover: #15803d; /* green-700 */
            --card-green-text: #ffffff;

            --card-yellow-bg: #ca8a04; /* yellow-600 */
            --card-yellow-hover: #a16207; /* yellow-700 */
            --card-yellow-text: #ffffff;

            --card-purple-bg: #7c3aed; /* purple-600 */
            --card-purple-hover: #6d28d9; /* purple-700 */
            --card-purple-text: #ffffff;

            --card-orange-bg: #ea580c; /* orange-600 */
            --card-orange-hover: #c2410c; /* orange-700 */
            --card-orange-text: #ffffff;

            --card-teal-bg: #0d9488; /* teal-600 */
            --card-teal-hover: #0f766e; /* teal-700 */
            --card-teal-text: #ffffff;

            --card-red-bg: #dc2626; /* red-600 */
            --card-red-hover: #b91c1c; /* red-700 */
            --card-red-text: #ffffff;

            --card-pink-bg: #db2777; /* pink-600 */
            --card-pink-hover: #be185d; /* pink-700 */
            --card-pink-text: #ffffff;

            --card-indigo-bg: #4f46e5; /* indigo-600 */
            --card-indigo-hover: #4338ca; /* indigo-700 */
            --card-indigo-text: #ffffff;

            --card-gray-bg: #4b5563; /* gray-600 */
            --card-gray-hover: #374151; /* gray-700 */
            --card-gray-text: #ffffff;
        }

        /* Green Theme */
        body[data-theme='green'] {
            --primary-bg: #16a34a; /* green-600 */
            --primary-hover: #15803d; /* green-700 */
            --secondary-bg: #22c55e; /* green-500 */
            --body-bg: #e7f5e9; /* Lighter green background */
        }

        /* Purple Theme */
        body[data-theme='purple'] {
            --primary-bg: #7c3aed; /* purple-600 */
            --primary-hover: #6d28d9; /* purple-700 */
            --secondary-bg: #8b5cf6; /* purple-500 */
            --body-bg: #f3e8ff; /* Lighter purple background */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--body-bg); /* Use CSS variable for body background */
        }
        /* Header, buttons, and other elements use primary colors */
        .header-bg {
            background-color: var(--primary-bg);
        }
        .header-button {
            background-color: var(--primary-hover);
        }
        .header-button:hover {
            background-color: var(--secondary-bg); /* A slightly different hover for header buttons */
        }

        /* Menu card colors will now be directly applied via specific classes */
        .menu-card.card-blue {
            background-color: var(--card-blue-bg);
            color: var(--card-blue-text);
        }
        .menu-card.card-blue:hover {
            background-color: var(--card-blue-hover);
        }

        .menu-card.card-green {
            background-color: var(--card-green-bg);
            color: var(--card-green-text);
        }
        .menu-card.card-green:hover {
            background-color: var(--card-green-hover);
        }
        .menu-card.card-yellow {
            background-color: var(--card-yellow-bg);
            color: var(--card-yellow-text);
        }
        .menu-card.card-yellow:hover {
            background-color: var(--card-yellow-hover);
        }
        .menu-card.card-purple {
            background-color: var(--card-purple-bg);
            color: var(--card-purple-text);
        }
        .menu-card.card-purple:hover {
            background-color: var(--card-purple-hover);
        }
        .menu-card.card-orange {
            background-color: var(--card-orange-bg);
            color: var(--card-orange-text);
        }
        .menu-card.card-orange:hover {
            background-color: var(--card-orange-hover);
        }
        .menu-card.card-teal {
            background-color: var(--card-teal-bg);
            color: var(--card-teal-text);
        }
        .menu-card.card-teal:hover {
            background-color: var(--card-teal-hover);
        }
        .menu-card.card-red {
            background-color: var(--card-red-bg);
            color: var(--card-red-text);
        }
        .menu-card.card-red:hover {
            background-color: var(--card-red-hover);
        }
        .menu-card.card-pink {
            background-color: var(--card-pink-bg);
            color: var(--card-pink-text);
        }
        .menu-card.card-pink:hover {
            background-color: var(--card-pink-hover);
        }
        .menu-card.card-indigo {
            background-color: var(--card-indigo-bg);
            color: var(--card-indigo-text);
        }
        .menu-card.card-indigo:hover {
            background-color: var(--card-indigo-hover);
        }
        .menu-card.card-gray { /* For Program Kerja Guru */
            background-color: var(--card-gray-bg);
            color: var(--card-gray-text);
        }
        .menu-card.card-gray:hover {
            background-color: var(--card-gray-hover);
        }

        /* Style for scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e2e8f0;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #94a3b8;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        /* Card specific styles */
        .menu-card {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            transform-origin: center;
        }
        .menu-card:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        /* Profile thumbnail in header */
        .profile-thumbnail-container {
            display: flex;
            align-items: center;
            cursor: pointer;
            margin-right: 1rem;
        }
        .profile-thumbnail {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #ffffff;
            transition: transform 0.2s ease-in-out;
        }
        .profile-thumbnail:hover {
            transform: scale(1.1);
        }
        .profile-icon {
            font-size: 2rem;
            color: #ffffff;
            border: 2px solid #ffffff;
            border-radius: 50%;
            padding: 5px; /* Adjust padding to make icon size similar to image */
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            transition: transform 0.2s ease-in-out;
        }
        .profile-icon:hover {
            transform: scale(1.1);
        }

        /* Custom Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 90%;
            width: 400px;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">
    <!-- Header -->
    <header class="header-bg text-white p-4 shadow-lg z-10">
        <div class="container mx-auto flex items-center justify-between">
            <div>
                <h1 class="text-3xl font-bold flex items-center">
                    <i class="fas fa-graduation-cap mr-3"></i> Sigma Edu
                </h1>
                <p class="text-sm mt-1">Dikembangkan oleh Cikgu Tere</p>
                <div id="userIdDisplay" class="text-xs mt-1"></div>
            </div>
            <div class="flex items-center space-x-4">
                <!-- Profil Thumbnail di Header -->
                <div id="headerProfileThumbnail" class="profile-thumbnail-container" onclick="showSection('profilGuru')">
                    <!-- Gambar atau Ikon akan dimuat oleh JavaScript -->
                    <img id="headerProfilePhoto" src="" alt="Profil" class="profile-thumbnail hidden">
                    <i id="headerProfileIcon" class="fas fa-user-circle profile-icon hidden"></i>
                </div>

                <button id="settingsBtn" class="header-button hover:bg-blue-800 text-white font-semibold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-cog"></i>
                    <span>Pengaturan</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Area Konten Utama - tanpa sidebar -->
    <div class="flex flex-1 pt-4 pb-4 px-4 md:px-8 lg:px-12"> <!-- Padding disesuaikan untuk tanpa sidebar -->
        <main class="flex-1 max-w-full">
            <!-- Bagian Beranda (Dashboard dengan Kartu Menu) -->
            <section id="home" class="content-section bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center active-section">
                <i class="fas fa-home text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Selamat Datang di Portal Administrasi Guru!</h2>
                <p class="text-lg text-gray-700 mb-6">
                    Pilih menu di bawah ini untuk memulai pengelolaan administrasi Anda.
                </p>
                <!-- Grid Kartu Menu -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 w-full max-w-5xl">
                    <!-- Kartu Profil DIHAPUS dari sini, sekarang ada di header -->
                    <div class="menu-card card-blue p-6 rounded-lg shadow-md flex flex-col items-center justify-center text-center" onclick="showSection('jadwalMengajar')">
                        <i class="fas fa-calendar-alt text-5xl mb-3"></i>
                        <h3 class="text-xl font-semibold">Jadwal Mengajar</h3>
                    </div>
                    <div class="menu-card card-green p-6 rounded-lg shadow-md flex flex-col items-center justify-center text-center" onclick="showSection('dataSiswa')">
                        <i class="fas fa-user-graduate text-5xl mb-3"></i>
                        <h3 class="text-xl font-semibold">Data Siswa</h3>
                    </div>
                    <div class="menu-card card-yellow p-6 rounded-lg shadow-md flex flex-col items-center justify-center text-center" onclick="showSection('daftarHadir')">
                        <i class="fas fa-check-square text-5xl mb-3"></i>
                        <h3 class="text-xl font-semibold">Daftar Hadir</h3>
                    </div>
                    <div class="menu-card card-purple p-6 rounded-lg shadow-md flex flex-col items-center justify-center text-center" onclick="showSection('modulAjar')">
                        <i class="fas fa-book text-5xl mb-3"></i>
                        <h3 class="text-xl font-semibold">Modul Ajar</h3>
                    </div>
                    <div class="menu-card card-orange p-6 rounded-lg shadow-md flex flex-col items-center justify-center text-center" onclick="showSection('programSemester')">
                        <i class="fas fa-chart-bar text-5xl mb-3"></i>
                        <h3 class="text-xl font-semibold">Program Semester & Tahunan</h3>
                    </div>
                    <div class="menu-card card-teal p-6 rounded-lg shadow-md flex flex-col items-center justify-center text-center" onclick="showSection('kalenderPendidikan')">
                        <i class="fas fa-calendar-check text-5xl mb-3"></i>
                        <h3 class="text-xl font-semibold">Kalender Pendidikan</h3>
                    </div>
                    <div class="menu-card card-red p-6 rounded-lg shadow-md flex flex-col items-center justify-center text-center" onclick="showSection('asesmen')">
                        <i class="fas fa-pencil-alt text-5xl mb-3"></i>
                        <h3 class="text-xl font-semibold">Asesmen</h3>
                    </div>
                    <div class="menu-card card-pink p-6 rounded-lg shadow-md flex flex-col items-center justify-center text-center" onclick="showSection('karyaInovatif')">
                        <i class="fas fa-lightbulb text-5xl mb-3"></i>
                        <h3 class="text-xl font-semibold">Karya Inovatif</h3>
                    </div>
                    <div class="menu-card card-indigo p-6 rounded-lg shadow-md flex flex-col items-center justify-center text-center" onclick="showSection('riwayatPelatihan')">
                        <i class="fas fa-graduation-cap text-5xl mb-3"></i>
                        <h3 class="text-xl font-semibold">Riwayat Pelatihan</h3>
                    </div>
                    <div class="menu-card card-gray p-6 rounded-lg shadow-md flex flex-col items-center justify-center text-center" onclick="showSection('programKerjaGuru')">
                        <i class="fas fa-clipboard-list text-5xl mb-3"></i>
                        <h3 class="text-xl font-semibold">Program Kerja Guru</h3>
                    </div>
                </div>
            </section>

            <!-- Bagian Profil Guru -->
            <section id="profilGuru" class="content-section hidden bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center relative">
                <button onclick="showSection('home')" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center space-x-2 absolute top-4 left-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali ke Beranda</span>
                </button>
                <i class="fas fa-user-circle text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Profil Guru</h2>
                <p class="text-lg text-gray-700 mb-6">Kelola informasi pribadi Anda.</p>
                <div class="w-full max-w-md text-left">
                    <div class="mb-6 flex flex-col items-center">
                        <img id="profilePhoto" src="https://placehold.co/150x150/e0e0e0/ffffff?text=Foto" alt="Foto Profil" class="w-32 h-32 rounded-full object-cover mb-4 border-2 border-gray-300">
                        <input type="file" id="uploadPhoto" accept="image/*" class="hidden">
                        <div class="flex space-x-2">
                            <button onclick="document.getElementById('uploadPhoto').click()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                                <i class="fas fa-upload"></i>
                                <span>Tambah Foto</span>
                            </button>
                            <button id="deletePhotoBtn" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105 hidden">
                                <i class="fas fa-trash"></i>
                                <span>Hapus Foto</span>
                            </button>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label for="namaGuru" class="block text-gray-700 text-sm font-bold mb-2">Nama Lengkap:</label>
                        <input type="text" id="namaGuru" value="[Nama Guru]" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" disabled>
                    </div>
                    <div class="mb-4">
                        <label for="nipGuru" class="block text-gray-700 text-sm font-bold mb-2">NIP:</label>
                        <input type="text" id="nipGuru" value="[NIP]" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" disabled>
                    </div>
                    <div class="mb-4">
                        <label for="emailGuru" class="block text-gray-700 text-sm font-bold mb-2">Email:</label>
                        <input type="email" id="emailGuru" value="[Email]" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" disabled>
                    </div>
                    <div class="mb-6">
                        <label for="nomorWAGuru" class="block text-gray-700 text-sm font-bold mb-2">Nomor WhatsApp:</label>
                        <input type="text" id="nomorWAGuru" value="[Nomor WA]" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" disabled>
                    </div>
                    <div class="flex justify-center space-x-4">
                        <button id="editProfilBtn" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-edit"></i>
                            <span>Edit/Ubah</span>
                        </button>
                        <button id="simpanProfilBtn" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105 hidden">
                            <i class="fas fa-save"></i>
                            <span>Simpan</span>
                        </button>
                        <button onclick="printSection('profilGuru')" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-print"></i>
                            <span>Cetak Dokumen</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Bagian Jadwal Mengajar -->
            <section id="jadwalMengajar" class="content-section hidden bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center relative">
                <button onclick="showSection('home')" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center space-x-2 absolute top-4 left-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali ke Beranda</span>
                </button>
                <i class="fas fa-calendar-alt text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Jadwal Mengajar</h2>
                <p class="text-lg text-gray-700 mb-6">Kelola jadwal Anda dengan tautan Google Calendar, Google Sheet, atau layanan lain seperti Canva. Dokumen akan dibuka di tab baru untuk pengeditan dan tampilan.</p>
                <div class="mb-6 w-full max-w-2xl">
                    <label for="jadwalLink" class="block text-gray-700 text-sm font-bold mb-2 text-left">Tautan Dokumen Jadwal (Google Calendar/Sheet/Canva, dll.):</label>
                    <div class="flex items-center space-x-2">
                        <input type="text" id="jadwalLink" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Contoh: https://calendar.google.com/calendar/embed?src=...">
                        <button onclick="openLink('jadwalLink')" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-external-link-alt w-4 h-4"></i>
                            <span>Buka & Kelola/Unduh</span>
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mt-2 text-left">
                        <i class="fas fa-info-circle mr-1"></i> Dokumen akan dibuka di tab baru. Beberapa layanan mungkin membatasi tampilan langsung di halaman ini.
                    </p>
                </div>
                <button onclick="printSection('jadwalMengajar', 'jadwalLink')" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 mt-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-print"></i>
                    <span>Cetak Dokumen</span>
                </button>
            </section>

            <!-- Bagian Data Siswa -->
            <section id="dataSiswa" class="content-section hidden bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center relative">
                <button onclick="showSection('home')" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center space-x-2 absolute top-4 left-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali ke Beranda</span>
                </button>
                <i class="fas fa-user-graduate text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Data Siswa</h2>
                <p class="text-lg text-gray-700 mb-6">Lihat dan kelola data siswa dari Google Sheets (Dapodik).</p>
                <div class="mb-6 w-full max-w-2xl">
                    <label for="dataSiswaLink" class="block text-gray-700 text-sm font-bold mb-2 text-left">Tautan Google Sheet Data Siswa:</label>
                    <div class="flex items-center space-x-2">
                        <input type="text" id="dataSiswaLink" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Contoh: https://docs.google.com/spreadsheets/d/e/...">
                        <button onclick="openLink('dataSiswaLink')" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-external-link-alt w-4 h-4"></i>
                            <span>Buka & Kelola/Unduh</span>
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mt-2 text-left">
                        <i class="fas fa-info-circle mr-1"></i> Pastikan tautan Google Workspace Anda dibagikan secara publik atau dengan izin lihat.
                    </p>
                </div>
                <button onclick="printSection('dataSiswa', 'dataSiswaLink')" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 mt-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-print"></i>
                    <span>Cetak Dokumen</span>
                </button>
            </section>

            <!-- Bagian Daftar Hadir -->
            <section id="daftarHadir" class="content-section hidden bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center relative">
                <button onclick="showSection('home')" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center space-x-2 absolute top-4 left-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali ke Beranda</span>
                </button>
                <i class="fas fa-check-square text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Daftar Hadir Harian & Rekap Bulanan</h2>
                <p class="text-lg text-gray-700 mb-6">Formulir harian dan rekap otomatis dari Google Sheets. Tampilan rekap dapat difilter per bulan.</p>
                <div class="mb-6 w-full max-w-2xl">
                    <label for="daftarHadirLink" class="block text-gray-700 text-sm font-bold mb-2 text-left">Tautan Google Sheet Daftar Hadir:</label>
                    <div class="flex items-center space-x-2">
                        <input type="text" id="daftarHadirLink" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Contoh: https://docs.google.com/spreadsheets/d/e/...">
                        <button onclick="openLink('daftarHadirLink')" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-external-link-alt w-4 h-4"></i>
                            <span>Buka & Kelola/Unduh</span>
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mt-2 text-left">
                        <i class="fas fa-info-circle mr-1"></i> Pastikan tautan Google Workspace Anda dibagikan secara publik atau dengan izin lihat.
                    </p>
                </div>
                <button onclick="printSection('daftarHadir', 'daftarHadirLink')" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 mt-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-print"></i>
                    <span>Cetak Dokumen</span>
                </button>
            </section>

            <!-- Bagian Modul Ajar -->
            <section id="modulAjar" class="content-section hidden bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center relative">
                <button onclick="showSection('home')" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center space-x-2 absolute top-4 left-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali ke Beranda</span>
                </button>
                <i class="fas fa-book text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Modul Ajar</h2>
                <p class="text-lg text-gray-700 mb-6">Kelola modul ajar Anda per mata pelajaran dengan tautan Google Docs/Drive.</p>

                <div id="modulAjarList" class="w-full flex flex-col gap-4 max-w-2xl">
                    <!-- Item modul akan dirender di sini oleh JavaScript -->
                </div>

                <div class="flex flex-wrap justify-center gap-4 mt-6">
                    <button id="addModuleBtn" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                        <i class="fas fa-plus"></i>
                        <span>Tambah Modul Ajar</span>
                    </button>
                    <button id="fill8ModulesBtn" class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                        <i class="fas fa-th-large"></i>
                        <span>Isi 8 Modul Kosong</span>
                    </button>
                </div>
                
                <button onclick="printSection('modulAjar')" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 mt-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-print"></i>
                    <span>Cetak Dokumen</span>
                </button>
            </section>

            <!-- Bagian Program Semester & Tahunan -->
            <section id="programSemester" class="content-section hidden bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center relative">
                <button onclick="showSection('home')" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center space-x-2 absolute top-4 left-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali ke Beranda</span>
                </button>
                <i class="fas fa-chart-bar text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Program Semester & Program Tahunan</h2>
                <p class="text-lg text-gray-700 mb-6">Format tampilan tabel. Dokumen diambil dari Google Docs/Sheets.</p>
                <div class="mb-6 w-full max-w-2xl">
                    <label for="programSemesterLink" class="block text-gray-700 text-sm font-bold mb-2 text-left">Tautan Google Docs/Sheets Program:</label>
                    <div class="flex items-center space-x-2">
                        <input type="text" id="programSemesterLink" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Contoh: https://docs.google.com/document/d/e/...">
                        <button onclick="openLink('programSemesterLink')" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-external-link-alt w-4 h-4"></i>
                            <span>Buka & Kelola/Unduh</span>
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mt-2 text-left">
                        <i class="fas fa-info-circle mr-1"></i> Pastikan tautan Google Workspace Anda dibagikan secara publik atau dengan izin lihat.
                    </p>
                </div>
                <button onclick="printSection('programSemester', 'programSemesterLink')" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 mt-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-print"></i>
                    <span>Cetak Dokumen</span>
                </button>
            </section>

            <!-- Bagian Kalender Pendidikan -->
            <section id="kalenderPendidikan" class="content-section hidden bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center relative">
                <button onclick="showSection('home')" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center space-x-2 absolute top-4 left-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali ke Beranda</span>
                </button>
                <i class="fas fa-calendar-check text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Kalender Pendidikan</h2>
                <p class="text-lg text-gray-700 mb-6">Sinkron dengan Google Calendar atau unggah file PDF. Tampilan warna per bulan dan per kegiatan.</p>
                <div class="mb-6 w-full max-w-2xl">
                    <label for="kalenderLink" class="block text-gray-700 text-sm font-bold mb-2 text-left">Tautan Google Calendar/PDF:</label>
                    <div class="flex items-center space-x-2">
                        <input type="text" id="kalenderLink" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Contoh: https://calendar.google.com/calendar/embed?src=...">
                        <button onclick="openLink('kalenderLink')" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-external-link-alt w-4 h-4"></i>
                            <span>Buka & Kelola/Unduh</span>
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mt-2 text-left">
                        <i class="fas fa-info-circle mr-1"></i> Pastikan tautan Google Workspace Anda dibagikan secara publik atau dengan izin lihat. Untuk PDF, unggah ke Google Drive dan gunakan tautan berbagi.
                    </p>
                </div>
                <button onclick="printSection('kalenderPendidikan', 'kalenderLink')" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 mt-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-print"></i>
                    <span>Cetak Dokumen</span>
                </button>
            </section>

            <!-- Bagian Asesmen -->
            <section id="asesmen" class="content-section hidden bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center relative">
                <button onclick="showSection('home')" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center space-x-2 absolute top-4 left-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali ke Beranda</span>
                </button>
                <i class="fas fa-pencil-alt text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Asesmen</h2>
                <p class="text-lg text-gray-700 mb-6">Data penilaian siswa per mata pelajaran dan per tema. Otomatis sinkron dengan spreadsheet asesmen.</p>
                <div class="mb-6 w-full max-w-2xl">
                    <label for="asesmenLink" class="block text-gray-700 text-sm font-bold mb-2 text-left">Tautan Google Sheet Asesmen:</label>
                    <div class="flex items-center space-x-2">
                        <input type="text" id="asesmenLink" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Contoh: https://docs.google.com/spreadsheets/d/e/...">
                        <button onclick="openLink('asesmenLink')" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-external-link-alt w-4 h-4"></i>
                            <span>Buka & Kelola/Unduh</span>
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mt-2 text-left">
                        <i class="fas fa-info-circle mr-1"></i> Pastikan tautan Google Workspace Anda dibagikan secara publik atau dengan izin lihat.
                    </p>
                </div>
                <button onclick="printSection('asesmen', 'asesmenLink')" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 mt-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-print"></i>
                    <span>Cetak Dokumen</span>
                </button>
            </section>

            <!-- Bagian Karya Inovatif -->
            <section id="karyaInovatif" class="content-section hidden bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center relative">
                <button onclick="showSection('home')" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center space-x-2 absolute top-4 left-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali ke Beranda</span>
                </button>
                <i class="fas fa-lightbulb text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Karya Inovatif</h2>
                <p class="text-lg text-gray-700 mb-6">Dokumen berisi rekap karya inovatif yang telah dibuat guru. Dapat berupa Google Docs, Slides, atau PDF.</p>
                <div class="mb-6 w-full max-w-2xl">
                    <label for="karyaInovatifLink" class="block text-gray-700 text-sm font-bold mb-2 text-left">Tautan Dokumen Karya Inovatif:</label>
                    <div class="flex items-center space-x-2">
                        <input type="text" id="karyaInovatifLink" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Contoh: https://docs.google.com/presentation/d/e/...">
                        <button onclick="openLink('karyaInovatifLink')" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-external-link-alt w-4 h-4"></i>
                            <span>Buka & Kelola/Unduh</span>
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mt-2 text-left">
                        <i class="fas fa-info-circle mr-1"></i> Pastikan tautan Google Workspace Anda dibagikan secara publik atau dengan izin lihat.
                    </p>
                </div>
                <button onclick="printSection('karyaInovatif', 'karyaInovatifLink')" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 mt-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-print"></i>
                    <span>Cetak Dokumen</span>
                </button>
            </section>

            <!-- Bagian Riwayat Pelatihan -->
            <section id="riwayatPelatihan" class="content-section hidden bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center relative">
                <button onclick="showSection('home')" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center space-x-2 absolute top-4 left-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali ke Beranda</span>
                </button>
                <i class="fas fa-graduation-cap text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Riwayat Pelatihan</h2>
                <p class="text-lg text-gray-700 mb-6">Rekap riwayat pelatihan yang pernah diikuti guru beserta sertifikat. Dokumen diambil dari Google Drive.</p>
                <div class="mb-6 w-full max-w-2xl">
                    <label for="riwayatPelatihanLink" class="block text-gray-700 text-sm font-bold mb-2 text-left">Tautan Google Drive Folder Pelatihan:</label>
                    <div class="flex items-center space-x-2">
                        <input type="text" id="riwayatPelatihanLink" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Contoh: https://drive.google.com/drive/folders/...">
                        <button onclick="openLink('riwayatPelatihanLink')" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-external-link-alt w-4 h-4"></i>
                            <span>Buka & Kelola/Unduh</span>
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mt-2 text-left">
                        <i class="fas fa-info-circle mr-1"></i> Pastikan tautan Google Drive Anda dibagikan secara publik atau dengan izin lihat.
                    </p>
                </div>
                <button onclick="printSection('riwayatPelatihan', 'riwayatPelatihanLink')" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 mt-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-print"></i>
                    <span>Cetak Dokumen</span>
                </button>
            </section>

            <!-- Bagian Program Kerja Guru -->
            <section id="programKerjaGuru" class="content-section hidden bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center relative">
                <button onclick="showSection('home')" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center space-x-2 absolute top-4 left-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali ke Beranda</span>
                </button>
                <i class="fas fa-clipboard-list text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Program Kerja Guru</h2>
                <p class="text-lg text-gray-700 mb-6">Dokumen berisi daftar program kerja guru untuk tahun ajaran terkait.</p>
                <div class="mb-6 w-full max-w-2xl">
                    <label for="programKerjaGuruLink" class="block text-gray-700 text-sm font-bold mb-2 text-left">Tautan Dokumen Program Kerja Guru (Google Docs/Sheets/Slides):</label>
                    <div class="flex items-center space-x-2">
                        <input type="text" id="programKerjaGuruLink" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="Contoh: https://docs.google.com/document/d/e/...">
                        <button onclick="openLink('programKerjaGuruLink')" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-external-link-alt w-4 h-4"></i>
                            <span>Buka & Kelola/Unduh</span>
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 mt-2 text-left">
                        <i class="fas fa-info-circle mr-1"></i> Pastikan tautan Google Workspace Anda dibagikan secara publik atau dengan izin lihat.
                    </p>
                </div>
                <button onclick="printSection('programKerjaGuru', 'programKerjaGuruLink')" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 mt-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-print"></i>
                    <span>Cetak Dokumen</span>
                </button>
            </section>

            <!-- Bagian Pengaturan -->
            <section id="pengaturan" class="content-section hidden bg-white p-8 rounded-lg shadow-md mb-6 flex flex-col items-center text-center relative">
                <button onclick="showSection('home')" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg flex items-center space-x-2 absolute top-4 left-4 transition duration-300 ease-in-out transform hover:scale-105">
                    <i class="fas fa-arrow-left"></i>
                    <span>Kembali ke Beranda</span>
                </button>
                <i class="fas fa-cog text-blue-600 mb-4 text-5xl"></i>
                <h2 class="text-3xl font-semibold text-gray-800 mb-4">Pengaturan Aplikasi</h2>
                <p class="text-lg text-gray-700 mb-6">Sesuaikan tampilan dan perilaku aplikasi Anda.</p>
                <div class="w-full max-w-md text-left">
                    <div class="mb-6">
                        <label for="themeSelect" class="block text-gray-700 text-sm font-bold mb-2">Pilih Tema:</label>
                        <select id="themeSelect" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                            <option value="default">Biru (Default)</option>
                            <option value="green">Hijau</option>
                            <option value="purple">Ungu</option>
                        </select>
                    </div>
                    <div class="flex justify-center">
                        <button id="saveSettingsBtn" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-save"></i>
                            <span>Simpan Pengaturan</span>
                        </button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Custom Modal for Messages -->
    <div id="customModal" class="modal-overlay hidden">
        <div class="modal-content">
            <p id="modalMessage" class="text-gray-800 text-lg mb-6"></p>
            <button id="modalCloseBtn" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105">
                OK
            </button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, collection, query, onSnapshot, deleteDoc, addDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const sections = document.querySelectorAll('.content-section');
        const MAX_MODULES = 10; // Batas maksimum modul ajar
        let modulesData = []; // Akan diisi oleh listener Firestore
        let profileData = {
            nama: '[Nama Guru]',
            nip: '[NIP]',
            email: '[Email]',
            nomorWA: '[Nomor WA]',
            photo: '' // String Base64 untuk foto
        };
        let externalLinks = {}; // Akan diisi oleh Firestore
        let currentTheme = 'default'; // Akan diisi oleh Firestore

        const defaultProfilePhoto = "https://placehold.co/150x150/e0e0e0/ffffff?text=Foto"; // Placeholder gambar

        // Variabel global Firebase
        let app;
        let db;
        let auth;
        let userId = 'anonymous'; // userId default atau sementara
        let isFirebaseReady = false;

        // Konfigurasi Firebase (disediakan oleh lingkungan Canvas)
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        // Inisialisasi Firebase
        async function initializeFirebase() {
            try {
                console.log("DEBUG: Memulai inisialisasi Firebase...");
                if (!app) {
                    app = initializeApp(firebaseConfig);
                    db = getFirestore(app);
                    auth = getAuth(app);
                    console.log("DEBUG: Firebase app, db, auth berhasil diinisialisasi.");

                    onAuthStateChanged(auth, async (user) => {
                        if (user) {
                            userId = user.uid;
                            console.log("Firebase Auth Ready. User ID:", userId);
                            document.getElementById('userIdDisplay').textContent = `User ID: ${userId}`;
                            isFirebaseReady = true;
                            console.log("DEBUG: Memuat semua data pengguna setelah autentikasi...");
                            await loadAllUserData();
                            console.log("DEBUG: Data pengguna dimuat. Menyiapkan pendengar real-time...");
                            setupRealtimeListeners();
                            console.log("DEBUG: Pendengar real-time disiapkan.");
                        } else {
                            console.log("DEBUG: Tidak ada pengguna terautentikasi. Mencoba masuk...");
                            try {
                                if (initialAuthToken) {
                                    await signInWithCustomToken(auth, initialAuthToken);
                                    console.log("DEBUG: Berhasil masuk dengan token kustom.");
                                } else {
                                    await signInAnonymously(auth);
                                    console.log("DEBUG: Berhasil masuk secara anonim.");
                                }
                            } catch (authError) {
                                console.error("DEBUG: Kesalahan saat masuk Firebase:", authError);
                                showMessage("Kesalahan masuk. Mohon coba lagi.");
                            }
                        }
                    }, (error) => {
                        console.error("DEBUG: Kesalahan di onAuthStateChanged listener:", error);
                        showMessage("Kesalahan autentikasi Firebase. Mohon coba lagi.");
                    });
                }
            } catch (error) {
                console.error("DEBUG: Kesalahan Kritis selama inisialisasi Firebase (initializeApp, getFirestore, getAuth):", error);
                showMessage("Gagal menginisialisasi layanan data. Mohon periksa konsol untuk detail.");
            }
        }

        // Fungsi untuk menampilkan modal pesan kustom
        function showMessage(message) {
            document.getElementById('modalMessage').innerText = message;
            document.getElementById('customModal').classList.remove('hidden');
        }

        // --- Paparkan fungsi ke lingkup global ---
        // Fungsi-fungsi ini dipanggil langsung dari atribut onclick HTML,
        // jadi mereka perlu diakses secara global.
        window.showMessage = showMessage;
        window.showSection = showSection;
        window.openLink = openLink;
        window.printSection = printSection;
        window.updateModule = updateModule; // Digunakan dalam input Modul Ajar
        window.deleteModule = deleteModule; // Digunakan dalam tombol Modul Ajar
        window.openModuleLinkById = openModuleLinkById; // Digunakan dalam tombol Modul Ajar


        // Fungsi untuk menyembunyikan modal pesan kustom
        document.getElementById('modalCloseBtn').addEventListener('click', () => {
            document.getElementById('customModal').classList.add('hidden');
        });

        // Fungsi untuk menampilkan bagian tertentu
        function showSection(id) {
            sections.forEach(section => {
                section.classList.add('hidden');
                section.classList.remove('active-section');
            });
            document.getElementById(id).classList.remove('hidden');
            document.getElementById(id).classList.add('active-section');
            // Jika kembali ke home, gulir ke atas
            if (id === 'home') {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Fungsi untuk membuka tautan di tab baru, dengan konfirmasi untuk tautan kosong
        async function openLink(inputId) {
            if (!isFirebaseReady) {
                showMessage('Layanan data belum siap. Mohon tunggu sebentar.');
                return;
            }
            // Gunakan data externalLinks yang dimuat dari Firestore
            const linkValue = externalLinks[inputId];
            if (linkValue && linkValue.trim() !== '') {
                window.open(linkValue, '_blank');
            } else {
                showMessage('Tidak ada tautan untuk dibuka. Silakan masukkan tautan terlebih dahulu.');
            }
        }

        // Fungsi untuk mencetak bagian atau membuka tautan untuk dicetak
        async function printSection(sectionId, linkInputId = null) {
            if (!isFirebaseReady) {
                showMessage('Layanan data belum siap. Mohon tunggu sebentar.');
                return;
            }

            if (linkInputId) {
                const linkValue = externalLinks[linkInputId];
                if (linkValue && linkValue.trim() !== '') {
                    window.open(linkValue, '_blank');
                    showMessage('Dokumen akan dibuka di tab baru. Dari sana, Anda dapat mengunduhnya dalam format PDF atau format lain yang didukung Google Workspace (biasanya melalui menu File > Download).');
                } else {
                    showMessage('Tidak ada tautan dokumen untuk dicetak. Silakan masukkan tautan terlebih dahulu.');
                }
            } else {
                // Untuk bagian tanpa tautan eksternal (misalnya, Profil, Modul Ajar)
                const printContent = document.getElementById(sectionId).cloneNode(true);
                // Hapus elemen yang tidak diperlukan untuk pencetakan (tombol, bidang input)
                printContent.querySelectorAll('button, input, select, label').forEach(el => el.remove());
                if (printContent.querySelector('p.text-lg')) {
                    printContent.querySelector('p.text-lg').remove(); // Hapus deskripsi bagian
                }
                if (printContent.querySelector('i.fas.text-blue-600')) {
                    printContent.querySelector('i.fas.text-blue-600').remove(); // Hapus ikon bagian
                }
                if (printContent.querySelector('h2')) {
                    printContent.querySelector('h2').style.textAlign = 'center'; // Tengahkan judul untuk pencetakan
                }
                
                // Untuk profilGuru, sesuaikan gambar dan perataan teks
                if (sectionId === 'profilGuru') {
                    const profilePhoto = printContent.querySelector('img#profilePhoto');
                    if (profilePhoto) {
                        profilePhoto.style.display = 'block';
                        profilePhoto.style.margin = '0 auto';
                    }
                    printContent.querySelectorAll('div > label + input').forEach(input => {
                        input.style.border = 'none';
                        input.style.boxShadow = 'none';
                        input.style.padding = '0';
                        input.style.width = 'auto';
                        input.style.display = 'inline';
                        input.style.verticalAlign = 'baseline';
                    });
                     printContent.querySelectorAll('div > label').forEach(label => {
                        label.style.display = 'inline';
                        label.style.fontWeight = 'bold';
                        label.style.marginRight = '5px';
                    });
                    const divElements = printContent.querySelectorAll('div.mb-4');
                    divElements.forEach(div => {
                        div.style.marginBottom = '10px';
                        div.style.textAlign = 'left';
                    });
                     // Hapus div spesifik yang berisi tombol unggah/hapus
                    const uploadPhotoDiv = printContent.querySelector('.mb-6.flex.flex-col.items-center');
                    if (uploadPhotoDiv) {
                        uploadPhotoDiv.remove();
                    }
                }
                
                // Untuk modulAjar, sederhanakan tampilan untuk pencetakan
                if (sectionId === 'modulAjar') {
                    const modulList = printContent.querySelector('#modulAjarList');
                    if (modulList) {
                        modulList.classList.remove('flex', 'flex-col', 'gap-4');
                        modulList.classList.add('grid', 'grid-cols-1'); // Jadikan daftar sederhana untuk pencetakan
                        modulList.style.textAlign = 'left';
                        modulList.querySelectorAll('.modul-item').forEach(item => {
                            item.classList.remove('flex', 'items-center', 'space-x-4');
                            item.classList.add('flex', 'flex-col', 'mb-4', 'p-2', 'border', 'rounded');
                            item.querySelector('.modul-inputs').classList.remove('flex-1', 'flex', 'flex-col', 'space-y-2');
                            item.querySelector('.modul-actions').remove(); // Hapus tombol aksi
                            item.querySelectorAll('label').forEach(label => {
                                label.style.fontWeight = 'bold';
                                label.style.marginRight = '5px';
                                label.style.display = 'inline';
                            });
                            item.querySelectorAll('input').forEach(input => {
                                input.style.border = 'none';
                                input.style.boxShadow = 'none';
                                input.style.padding = '0';
                                input.style.width = 'auto';
                                input.style.display = 'inline';
                                input.style.verticalAlign = 'baseline';
                            });
                            const subjectInput = item.querySelector(`input[id^="subject"]`);
                            const linkInput = item.querySelector(`input[id^="link"]`);
                            
                            const subjectDiv = document.createElement('div');
                            subjectDiv.innerHTML = `<strong>Mata Pelajaran:</strong> ${subjectInput ? subjectInput.value : ''}`;
                            
                            const linkDiv = document.createElement('div');
                            linkDiv.innerHTML = `<strong>Tautan:</strong> <a href="${linkInput ? linkInput.value : '#'}" target="_blank">${linkInput ? linkInput.value : ''}</a>`;
                            
                            item.innerHTML = ''; // Hapus konten sebelumnya
                            item.appendChild(subjectDiv);
                            item.appendChild(linkDiv);
                        });
                    }
                }


                const printWindow = window.open('', '_blank');
                printWindow.document.open();
                printWindow.document.write(`
                    <!DOCTYPE html>
                    <html lang="id">
                    <head>
                        <meta charset="UTF-8">
                        <meta name="viewport" content="width=device-width, initial-scale=1.0">
                        <title>Cetak Dokumen - Sigma Edu</title>
                        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
                        <style>
                            body { font-family: 'Inter', sans-serif; margin: 20px; }
                            h1, h2, h3 { color: #1f2937; text-align: center; margin-bottom: 20px; }
                            p { color: #4b5563; line-height: 1.6; }
                            img { max-width: 100%; height: auto; display: block; margin-bottom: 20px; }
                            .modul-item { border-bottom: 1px dashed #ccc; padding-bottom: 10px; margin-bottom: 10px; }
                        </style>
                </head>
                <body>
                    ${printContent.innerHTML}
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }
    }

        // --- Pemuatan dan Pendengar Data Firebase ---

        // Fungsi untuk memuat semua data pengguna dari Firestore
        async function loadAllUserData() {
            if (!isFirebaseReady) {
                console.warn("DEBUG: Firebase belum siap untuk memuat data.");
                return;
            }
            try {
                console.log("DEBUG: Memuat data profil dan tema...");
                const profileDocRef = doc(db, 'artifacts', appId, 'users', userId, 'settings', 'profileAndSettings');
                const profileDocSnap = await getDoc(profileDocRef);
                if (profileDocSnap.exists()) {
                    const data = profileDocSnap.data();
                    profileData = {
                        nama: data.nama || '[Nama Guru]',
                        nip: data.nip || '[NIP]',
                        email: data.email || '[Email]',
                        nomorWA: data.nomorWA || '[Nomor WA]',
                        photo: data.photo || ''
                    };
                    currentTheme = data.theme || 'default';
                    console.log("DEBUG: Data profil dimuat:", profileData);
                    console.log("DEBUG: Tema dimuat:", currentTheme);
                } else {
                    console.log("DEBUG: Dokumen profil tidak ditemukan, menggunakan data default.");
                }
                loadProfileData(); // Perbarui UI dengan profil yang dimuat
                applyTheme(currentTheme); // Terapkan tema yang dimuat
                document.getElementById('themeSelect').value = currentTheme;

                console.log("DEBUG: Memuat tautan eksternal...");
                const linksDocRef = doc(db, 'artifacts', appId, 'users', userId, 'settings', 'externalLinks');
                const linksDocSnap = await getDoc(linksDocRef);
                if (linksDocSnap.exists()) {
                    externalLinks = linksDocSnap.data();
                    console.log("DEBUG: Tautan eksternal dimuat:", externalLinks);
                    // Isi bidang input dengan tautan yang dimuat
                    for (const key in externalLinks) {
                        const inputElement = document.getElementById(key);
                        if (inputElement) {
                            inputElement.value = externalLinks[key];
                        }
                    }
                } else {
                    console.log("DEBUG: Dokumen tautan eksternal tidak ditemukan, menggunakan data kosong.");
                    externalLinks = {}; // Reset jika dokumen tidak ada
                }

            } catch (error) {
                console.error("DEBUG: Error in loadAllUserData:", error);
                showMessage("Gagal memuat data. Mohon coba lagi atau masukkan data jika ini adalah pertama kali.");
            }
        }

        // Siapkan pendengar real-time untuk modul
        function setupRealtimeListeners() {
            if (!isFirebaseReady) {
                console.warn("DEBUG: Firebase belum siap, tidak dapat menyiapkan pendengar real-time.");
                return;
            }

            console.log("DEBUG: Menyiapkan pendengar modul...");
            const modulesCollectionRef = collection(db, 'artifacts', appId, 'users', userId, 'modules');
            onSnapshot(modulesCollectionRef, (snapshot) => {
                const updatedModules = [];
                snapshot.forEach(doc => {
                    updatedModules.push({ id: doc.id, ...doc.data() });
                });
                modulesData = updatedModules;
                renderModules(); // Render ulang modul setiap kali data berubah di Firestore
                console.log("DEBUG: Modul diperbarui secara real-time:", modulesData);
            }, (error) => {
                console.error("DEBUG: Kesalahan saat mendengarkan modul:", error);
                showMessage("Gagal memuat modul ajar secara real-time.");
            });

             console.log("DEBUG: Menyiapkan pendengar tautan eksternal...");
            const linksDocRef = doc(db, 'artifacts', appId, 'users', userId, 'settings', 'externalLinks');
            onSnapshot(linksDocRef, (docSnap) => {
                if (docSnap.exists()) {
                    externalLinks = docSnap.data();
                    console.log("DEBUG: Tautan eksternal diperbarui secara real-time:", externalLinks);
                    // Perbarui bidang input yang relevan
                    for (const key in externalLinks) {
                        const inputElement = document.getElementById(key);
                        if (inputElement) {
                            inputElement.value = externalLinks[key];
                        }
                    }
                } else {
                    console.log("DEBUG: Dokumen tautan eksternal tidak ditemukan, mereset data.");
                    externalLinks = {}; // Reset jika dokumen tidak ada
                }
            }, (error) => {
                console.error("DEBUG: Kesalahan saat mendengarkan tautan eksternal:", error);
                showMessage("Gagal memuat tautan eksternal secara real-time.");
            });

            console.log("DEBUG: Menyiapkan pendengar profil dan pengaturan...");
            const profileDocRef = doc(db, 'artifacts', appId, 'users', userId, 'settings', 'profileAndSettings');
            onSnapshot(profileDocRef, (docSnap) => {
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    profileData = {
                        nama: data.nama || '[Nama Guru]',
                        nip: data.nip || '[NIP]',
                        email: data.email || '[Email]',
                        nomorWA: data.nomorWA || '[Nomor WA]',
                        photo: data.photo || ''
                    };
                    currentTheme = data.theme || 'default';
                    loadProfileData(); // Perbarui UI profil
                    applyTheme(currentTheme); // Terapkan tema
                    document.getElementById('themeSelect').value = currentTheme;
                    console.log("DEBUG: Profil dan pengaturan diperbarui secara real-time:", profileData, currentTheme);
                } else {
                    console.log("DEBUG: Dokumen profil dan pengaturan tidak ditemukan, menggunakan data default.");
                }
            }, (error) => {
                console.error("DEBUG: Kesalahan saat mendengarkan profil dan pengaturan:", error);
                showMessage("Gagal memuat profil dan pengaturan secara real-time.");
            });
        }


        // --- Manajemen Profil ---
        function loadProfileData() {
            document.getElementById('namaGuru').value = profileData.nama;
            document.getElementById('nipGuru').value = profileData.nip;
            document.getElementById('emailGuru').value = profileData.email;
            document.getElementById('nomorWAGuru').value = profileData.nomorWA;

            const profilePhoto = document.getElementById('profilePhoto');
            const deletePhotoBtn = document.getElementById('deletePhotoBtn');
            const headerProfilePhoto = document.getElementById('headerProfilePhoto');
            const headerProfileIcon = document.getElementById('headerProfileIcon');

            if (profileData.photo) {
                profilePhoto.src = profileData.photo;
                profilePhoto.classList.remove('hidden');
                deletePhotoBtn.classList.remove('hidden');
                headerProfilePhoto.src = profileData.photo;
                headerProfilePhoto.classList.remove('hidden');
                headerProfileIcon.classList.add('hidden');
            } else {
                profilePhoto.src = defaultProfilePhoto;
                profilePhoto.classList.remove('hidden'); // Pastikan placeholder terlihat
                deletePhotoBtn.classList.add('hidden');
                headerProfilePhoto.classList.add('hidden');
                headerProfileIcon.classList.remove('hidden');
            }
        }

        async function saveProfileData() {
            if (!isFirebaseReady) {
                showMessage('Layanan data belum siap. Mohon tunggu sebentar.');
                return;
            }
            try {
                profileData.nama = document.getElementById('namaGuru').value;
                profileData.nip = document.getElementById('nipGuru').value;
                profileData.email = document.getElementById('emailGuru').value;
                profileData.nomorWA = document.getElementById('nomorWAGuru').value;

                const profileDocRef = doc(db, 'artifacts', appId, 'users', userId, 'settings', 'profileAndSettings');
                await setDoc(profileDocRef, profileData, { merge: true }); // Gabungkan untuk memperbarui hanya bidang yang berubah
                showMessage('Profil berhasil disimpan!');
            } catch (error) {
                console.error("DEBUG: Error saving profile data:", error);
                showMessage("Gagal menyimpan profil. Mohon coba lagi.");
            }
        }

        function toggleProfileEdit(enable) {
            const inputs = ['namaGuru', 'nipGuru', 'emailGuru', 'nomorWAGuru'];
            inputs.forEach(id => {
                document.getElementById(id).disabled = !enable;
            });

            document.getElementById('editProfilBtn').classList.toggle('hidden', enable);
            document.getElementById('simpanProfilBtn').classList.toggle('hidden', !enable);
        }

        document.getElementById('editProfilBtn').addEventListener('click', () => {
            toggleProfileEdit(true);
        });

        document.getElementById('simpanProfilBtn').addEventListener('click', async () => {
            await saveProfileData();
            toggleProfileEdit(false);
        });

        document.getElementById('uploadPhoto').addEventListener('change', async (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = async (e) => {
                    profileData.photo = e.target.result;
                    await saveProfileData(); // Simpan dengan foto baru
                };
                reader.readAsDataURL(file);
            }
        });

        document.getElementById('deletePhotoBtn').addEventListener('click', async () => {
            profileData.photo = ''; // Hapus foto
            await saveProfileData(); // Simpan perubahan
            showMessage('Foto profil berhasil dihapus.');
        });

        // --- Manajemen Modul Ajar ---
        function renderModules() {
            const modulAjarList = document.getElementById('modulAjarList');
            modulAjarList.innerHTML = ''; // Hapus daftar yang ada

            if (modulesData.length === 0) {
                modulAjarList.innerHTML = '<p class="text-gray-600 text-center">Belum ada modul ajar yang ditambahkan.</p>';
            }

            modulesData.forEach((modul, index) => {
                const modulItem = document.createElement('div');
                modulItem.className = 'modul-item bg-gray-100 p-4 rounded-lg shadow-sm flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-4';
                modulItem.innerHTML = `
                    <div class="modul-inputs flex-1 flex flex-col space-y-2 w-full">
                        <div>
                            <label for="subject${modul.id}" class="block text-gray-700 text-sm font-bold mb-1 text-left">Mata Pelajaran:</label>
                            <input type="text" id="subject${modul.id}" value="${modul.subject}" placeholder="Contoh: Matematika" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" onchange="updateModule('${modul.id}', 'subject', this.value)">
                        </div>
                        <div>
                            <label for="link${modul.id}" class="block text-gray-700 text-sm font-bold mb-1 text-left">Link Modul Ajar:</label>
                            <input type="text" id="link${modul.id}" value="${modul.link}" placeholder="Contoh: https://docs.google.com/document/d/e/..." class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" onchange="updateModule('${modul.id}', 'link', this.value)">
                        </div>
                    </div>
                    <div class="modul-actions flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mt-3 sm:mt-0">
                        <button onclick="openModuleLinkById('${modul.id}')" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-external-link-alt"></i>
                            <span>Buka Dokumen</span>
                        </button>
                        <!-- Penjelasan: Perubahan pada input di atas disimpan secara otomatis. -->
                        <button onclick="deleteModule('${modul.id}')" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg flex items-center justify-center space-x-2 transition duration-300 ease-in-out transform hover:scale-105">
                            <i class="fas fa-trash"></i>
                            <span>Hapus</span>
                        </button>
                    </div>
                `;
                modulAjarList.appendChild(modulItem);
            });
        }

        async function updateModule(id, field, value) {
            if (!isFirebaseReady) {
                showMessage('Layanan data belum siap. Mohon tunggu sebentar.');
                return;
            }
            try {
                const moduleDocRef = doc(db, 'artifacts', appId, 'users', userId, 'modules', id);
                await setDoc(moduleDocRef, { [field]: value }, { merge: true });
                showMessage('Modul ajar berhasil diperbarui.');
            } catch (error) {
                console.error("DEBUG: Error updating module:", error);
                showMessage("Gagal memperbarui modul ajar. Mohon coba lagi.");
            }
        }

        async function deleteModule(id) {
            if (!isFirebaseReady) {
                showMessage('Layanan data belum siap. Mohon tunggu sebentar.');
                return;
            }
            try {
                const moduleDocRef = doc(db, 'artifacts', appId, 'users', userId, 'modules', id);
                await deleteDoc(moduleDocRef);
                showMessage('Modul ajar berhasil dihapus.');
            } catch (error) {
                console.error("DEBUG: Error deleting module:", error);
                showMessage("Gagal menghapus modul ajar. Mohon coba lagi.");
            }
        }

        function openModuleLinkById(id) {
            const module = modulesData.find(m => m.id === id);
            if (module && module.link.trim() !== '') {
                window.open(module.link, '_blank');
                showMessage('Dokumen akan dibuka di tab baru. Dari sana, Anda dapat mengunduhnya dalam format PDF atau format lain yang didukung Google Workspace (biasanya melalui menu File > Download).');
            } else {
                showMessage('Tidak ada tautan modul ajar untuk diunduh.');
            }
        }

        document.getElementById('addModuleBtn').addEventListener('click', async () => {
            if (!isFirebaseReady) {
                showMessage('Layanan data belum siap. Mohon tunggu sebentar.');
                return;
            }
            if (modulesData.length < MAX_MODULES) {
                try {
                    const newModule = { subject: '', link: '' };
                    const docRef = await addDoc(collection(db, 'artifacts', appId, 'users', userId, 'modules'), newModule);
                    console.log("DEBUG: Document written with ID: ", docRef.id);
                    showMessage('Modul ajar baru ditambahkan!');
                } catch (e) {
                    console.error("DEBUG: Error adding document: ", e);
                    showMessage("Gagal menambahkan modul ajar. Mohon coba lagi.");
                }
            } else {
                showMessage(`Anda telah mencapai batas maksimum ${MAX_MODULES} modul ajar.`);
            }
        });

        document.getElementById('fill8ModulesBtn').addEventListener('click', async () => {
            if (!isFirebaseReady) {
                showMessage('Layanan data belum siap. Mohon tunggu sebentar.');
                return;
            }
            const modulesToAdd = 8 - modulesData.length;
            if (modulesToAdd > 0) {
                let addedCount = 0;
                for (let i = 0; i < modulesToAdd && (modulesData.length + addedCount) < MAX_MODULES; i++) {
                    try {
                        const newModule = { subject: '', link: '' };
                        await addDoc(collection(db, 'artifacts', appId, 'users', userId, 'modules'), newModule);
                        addedCount++;
                    } catch (e) {
                        console.error("DEBUG: Error adding document during fill:", e);
                        showMessage("Gagal menambahkan beberapa modul ajar. Mohon coba lagi.");
                        break; // Hentikan jika ada kesalahan
                    }
                }
                if (addedCount > 0) {
                    showMessage(`${addedCount} modul ajar kosong berhasil ditambahkan.`);
                } else {
                    showMessage('Tidak ada modul kosong yang bisa ditambahkan lagi (sudah mencapai 8 atau batas maksimum).');
                }
            } else {
                showMessage('Anda sudah memiliki 8 modul ajar atau lebih.');
            }
        });


        // --- Manajemen Tautan Eksternal ---
        async function saveExternalLink(inputId, value) {
            if (!isFirebaseReady) {
                showMessage('Layanan data belum siap. Mohon tunggu sebentar.');
                return;
            }
            try {
                const linksDocRef = doc(db, 'artifacts', appId, 'users', userId, 'settings', 'externalLinks');
                await setDoc(linksDocRef, { [inputId]: value }, { merge: true });
                externalLinks[inputId] = value; // Perbarui status lokal segera
                console.log(`DEBUG: Tautan untuk ${inputId} disimpan.`);
            } catch (error) {
                console.error(`DEBUG: Error saving link for ${inputId}:`, error);
                showMessage(`Gagal menyimpan tautan untuk ${inputId}.`);
            }
        }

        // Tambahkan event listener untuk bidang input tautan eksternal
        const linkInputs = ['jadwalLink', 'dataSiswaLink', 'daftarHadirLink', 'programSemesterLink', 'kalenderLink', 'asesmenLink', 'karyaInovatifLink', 'riwayatPelatihanLink', 'programKerjaGuruLink'];
        linkInputs.forEach(id => {
            const inputElement = document.getElementById(id);
            if (inputElement) {
                inputElement.addEventListener('change', (event) => {
                    saveExternalLink(id, event.target.value);
                });
            }
        });

        // --- Pengaturan Tema ---
        const themeSelect = document.getElementById('themeSelect');
        const saveSettingsBtn = document.getElementById('saveSettingsBtn');

        function applyTheme(theme) {
            document.body.dataset.theme = theme;
        }

        themeSelect.addEventListener('change', async (event) => {
            const selectedTheme = event.target.value;
            if (!isFirebaseReady) {
                showMessage('Layanan data belum siap. Mohon tunggu sebentar.');
                return;
            }
            try {
                const profileDocRef = doc(db, 'artifacts', appId, 'users', userId, 'settings', 'profileAndSettings');
                await setDoc(profileDocRef, { theme: selectedTheme }, { merge: true });
                currentTheme = selectedTheme; // Perbarui status lokal
                applyTheme(selectedTheme);
                showMessage('Tema berhasil disimpan!');
            } catch (error) {
                console.error("DEBUG: Error saving theme:", error);
                showMessage("Gagal menyimpan tema. Mohon coba lagi.");
            }
        });

        saveSettingsBtn.addEventListener('click', async () => {
            // Perubahan tema sudah ditangani oleh event listener 'change' pada themeSelect
            // Tombol ini dapat digunakan untuk pengaturan lain jika ditambahkan nanti, atau hanya untuk konfirmasi.
            showMessage('Pengaturan berhasil disimpan!');
        });


        // Event listener untuk tombol pengaturan
        document.getElementById('settingsBtn').addEventListener('click', function() {
            showSection('pengaturan');
        });

        // Penyiapan awal
        document.addEventListener('DOMContentLoaded', () => {
            initializeFirebase(); // Mulai inisialisasi dan autentikasi Firebase
            showSection('home');
        });
    </script>
</body>
</html>
